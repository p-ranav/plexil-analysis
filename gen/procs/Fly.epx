<PlexilPlan LineNo="17" ColNo="0" FileName="Fly.ple"><GlobalDeclarations LineNo="17" ColNo="0"><LibraryNodeDeclaration LineNo="17" ColNo="0"><Name>AdjustForLostComm</Name></LibraryNodeDeclaration><LibraryNodeDeclaration LineNo="18" ColNo="0"><Name>AdjustRouteForLostComm</Name></LibraryNodeDeclaration><LibraryNodeDeclaration LineNo="19" ColNo="0"><Name>AdjustAltitudeForLostComm</Name></LibraryNodeDeclaration><StateDeclaration LineNo="21" ColNo="7"><Name>MessageFromATC</Name><Return><Name>_return_0</Name><Type>String</Type></Return></StateDeclaration><StateDeclaration LineNo="22" ColNo="8"><Name>DueEFC</Name><Return><Name>_return_0</Name><Type>Boolean</Type></Return></StateDeclaration><StateDeclaration LineNo="23" ColNo="8"><Name>AtClearanceLimit</Name><Return><Name>_return_0</Name><Type>Boolean</Type></Return></StateDeclaration><StateDeclaration LineNo="24" ColNo="8"><Name>AtFinalApproachFix</Name><Return><Name>_return_0</Name><Type>Boolean</Type></Return></StateDeclaration><StateDeclaration LineNo="25" ColNo="8"><Name>PendingRoute</Name><Return><Name>_return_0</Name><Type>Boolean</Type></Return></StateDeclaration><StateDeclaration LineNo="26" ColNo="8"><Name>NewRouteSegment</Name><Return><Name>_return_0</Name><Type>Boolean</Type></Return></StateDeclaration><StateDeclaration LineNo="27" ColNo="8"><Name>CurrentRouteSegmentAchieved</Name><Return><Name>_return_0</Name><Type>Boolean</Type></Return></StateDeclaration><CommandDeclaration LineNo="29" ColNo="0"><Name>handle_atc_message</Name><Parameter><Name>message</Name><Type>String</Type></Parameter></CommandDeclaration><CommandDeclaration LineNo="30" ColNo="0"><Name>command_next_route_segment</Name></CommandDeclaration><CommandDeclaration LineNo="31" ColNo="0"><Name>adjust_altitude</Name></CommandDeclaration><CommandDeclaration LineNo="32" ColNo="0"><Name>complete_route_segment</Name></CommandDeclaration><CommandDeclaration LineNo="33" ColNo="0"><Name>check_flight_progress</Name></CommandDeclaration><CommandDeclaration LineNo="34" ColNo="0"><Name>request_further_clearance</Name></CommandDeclaration><CommandDeclaration LineNo="35" ColNo="0"><Name>handle_clearance_limit</Name></CommandDeclaration><CommandDeclaration LineNo="36" ColNo="0"><Name>squawk</Name><Parameter><Name>transponder_code</Name><Type>Integer</Type></Parameter></CommandDeclaration><CommandDeclaration LineNo="37" ColNo="0"><Name>pprint</Name></CommandDeclaration></GlobalDeclarations><Concurrence LineNo="40" ColNo="5"><NodeId>Fly</NodeId><Interface><In><DeclareVariable LineNo="41" ColNo="5"><Name>Time</Name><Type>Integer</Type></DeclareVariable><DeclareVariable LineNo="42" ColNo="5"><Name>LostComm</Name><Type>Boolean</Type></DeclareVariable><DeclareVariable LineNo="43" ColNo="5"><Name>Continue</Name><Type>Boolean</Type></DeclareVariable></In></Interface><VariableDeclarations><DeclareVariable LineNo="45" ColNo="2"><Name>RouteProcessInterval</Name><Type>Integer</Type><InitialValue><IntegerValue>1</IntegerValue></InitialValue></DeclareVariable><DeclareVariable LineNo="46" ColNo="2"><Name>LastTime</Name><Type>Integer</Type><InitialValue><IntegerValue>0</IntegerValue></InitialValue></DeclareVariable></VariableDeclarations><ExitCondition LineNo="49" ColNo="2"><NOT LineNo="49" ColNo="7"><BooleanVariable>Continue</BooleanVariable></NOT></ExitCondition><Sequence LineNo="55" ColNo="4"><NodeId>HandleATC</NodeId><RepeatCondition LineNo="55" ColNo="4"><BooleanValue>true</BooleanValue></RepeatCondition><Node LineNo="60" ColNo="6" NodeType="Command"><NodeId>WaitForMessage</NodeId><StartCondition LineNo="58" ColNo="6"><IsKnown LineNo="58" ColNo="12"><Lookup LineNo="58" ColNo="21"><Name><StringValue>MessageFromATC</StringValue></Name></Lookup></IsKnown></StartCondition><NodeBody><Command><Name><StringValue>handle_atc_message</StringValue></Name><Arguments LineNo="61" ColNo="26"><Lookup LineNo="61" ColNo="26"><Name><StringValue>MessageFromATC</StringValue></Name></Lookup></Arguments></Command></NodeBody></Node></Sequence><Sequence LineNo="71" ColNo="4"><NodeId>ProcessRoute</NodeId><RepeatCondition LineNo="71" ColNo="4"><BooleanValue>true</BooleanValue></RepeatCondition><Sequence LineNo="74" ColNo="6"><NodeId>Iterate</NodeId><StartCondition LineNo="74" ColNo="6"><GT LineNo="74" ColNo="17"><IntegerVariable>Time</IntegerVariable><IntegerVariable>LastTime</IntegerVariable></GT></StartCondition><Node LineNo="75" ColNo="6" NodeType="Assignment"><NodeId>ASSIGNMENT__1</NodeId><NodeBody><Assignment><IntegerVariable>LastTime</IntegerVariable><NumericRHS><IntegerVariable>Time</IntegerVariable></NumericRHS></Assignment></NodeBody></Node><If LineNo="76" ColNo="6"><NodeId>if__2</NodeId><Condition><Lookup LineNo="76" ColNo="10"><Name><StringValue>PendingRoute</StringValue></Name></Lookup></Condition><Then><Sequence LineNo="77" ColNo="8"><NodeId>BLOCK__3</NodeId><If LineNo="77" ColNo="8"><NodeId>if__4</NodeId><Condition><Lookup LineNo="77" ColNo="12"><Name><StringValue>NewRouteSegment</StringValue></Name></Lookup></Condition><Then><Sequence LineNo="80" ColNo="10"><NodeId>BLOCK__5</NodeId><If LineNo="80" ColNo="10"><NodeId>if__6</NodeId><Condition><BooleanVariable>LostComm</BooleanVariable></Condition><Then><Node NodeType="LibraryNodeCall"><NodeId>LibraryCall__7</NodeId><NodeBody><LibraryNodeCall><NodeId>AdjustForLostComm</NodeId></LibraryNodeCall></NodeBody></Node></Then></If><Node LineNo="80" ColNo="10" NodeType="Command"><NodeId>COMMAND__8</NodeId><NodeBody><Command><Name><StringValue>command_next_route_segment</StringValue></Name></Command></NodeBody></Node></Sequence></Then><ElseIf><Condition><Lookup LineNo="83" ColNo="16"><Name><StringValue>CurrentRouteSegmentAchieved</StringValue></Name></Lookup></Condition><Then><Node LineNo="83" ColNo="10" NodeType="Command"><NodeId>COMMAND__10</NodeId><NodeBody><Command><Name><StringValue>complete_route_segment</StringValue></Name></Command></NodeBody></Node></Then></ElseIf><Else><Node LineNo="86" ColNo="10" NodeType="Command"><NodeId>COMMAND__12</NodeId><NodeBody><Command><Name><StringValue>check_flight_progress</StringValue></Name></Command></NodeBody></Node></Else></If><Node LineNo="89" ColNo="8" NodeType="Command"><NodeId>COMMAND__13</NodeId><NodeBody><Command><Name><StringValue>adjust_altitude</StringValue></Name></Command></NodeBody></Node></Sequence></Then></If></Sequence></Sequence><Sequence LineNo="99" ColNo="4"><NodeId>HandleLostComm</NodeId><RepeatCondition LineNo="99" ColNo="4"><BooleanValue>true</BooleanValue></RepeatCondition><Sequence LineNo="105" ColNo="6"><NodeId>InitiateLostComm</NodeId><StartCondition LineNo="105" ColNo="6"><AND LineNo="105" ColNo="21"><BooleanVariable>LostComm</BooleanVariable><NOT LineNo="105" ColNo="24"><Lookup LineNo="105" ColNo="25"><Name><StringValue>AtFinalApproachFix</StringValue></Name></Lookup></NOT></AND></StartCondition><EndCondition LineNo="106" ColNo="6"><OR LineNo="106" ColNo="20"><NOT LineNo="106" ColNo="10"><BooleanVariable>LostComm</BooleanVariable></NOT><Lookup LineNo="106" ColNo="23"><Name><StringValue>AtFinalApproachFix</StringValue></Name></Lookup></OR></EndCondition><Node LineNo="107" ColNo="6" NodeType="Command"><NodeId>COMMAND__14</NodeId><NodeBody><Command><Name><StringValue>pprint</StringValue></Name><Arguments LineNo="108" ColNo="14"><StringValue>Initiating Lost Comms procedure at time </StringValue><IntegerVariable>Time</IntegerVariable></Arguments></Command></NodeBody></Node><Node LineNo="108" ColNo="6" NodeType="Command"><NodeId>COMMAND__15</NodeId><NodeBody><Command><Name><StringValue>squawk</StringValue></Name><Arguments LineNo="109" ColNo="13"><IntegerValue>7600</IntegerValue></Arguments></Command></NodeBody></Node><Node NodeType="LibraryNodeCall"><NodeId>LibraryCall__16</NodeId><NodeBody><LibraryNodeCall><NodeId>AdjustForLostComm</NodeId></LibraryNodeCall></NodeBody></Node></Sequence><Node LineNo="116" ColNo="6" NodeType="Command"><NodeId>CancelLostComm</NodeId><StartCondition LineNo="115" ColNo="6"><NOT LineNo="115" ColNo="12"><BooleanVariable>LostComm</BooleanVariable></NOT></StartCondition><SkipCondition LineNo="116" ColNo="6"><Lookup LineNo="116" ColNo="11"><Name><StringValue>AtFinalApproachFix</StringValue></Name></Lookup></SkipCondition><NodeBody><Command><Name><StringValue>pprint</StringValue></Name><Arguments LineNo="117" ColNo="14"><StringValue>Terminating Lost Comms procedure at time </StringValue><IntegerVariable>Time</IntegerVariable></Arguments></Command></NodeBody></Node></Sequence><Sequence LineNo="128" ColNo="4"><NodeId>HandleEFC</NodeId><RepeatCondition LineNo="128" ColNo="4"><BooleanValue>true</BooleanValue></RepeatCondition><Node LineNo="133" ColNo="6" NodeType="Command"><NodeId>RequestFurtherClearance</NodeId><StartCondition LineNo="133" ColNo="6"><Lookup LineNo="133" ColNo="12"><Name><StringValue>DueEFC</StringValue></Name></Lookup></StartCondition><NodeBody><Command><Name><StringValue>request_further_clearance</StringValue></Name></Command></NodeBody></Node></Sequence><Sequence LineNo="143" ColNo="4"><NodeId>HandleClearanceLimit</NodeId><RepeatCondition LineNo="143" ColNo="4"><BooleanValue>true</BooleanValue></RepeatCondition><Node LineNo="146" ColNo="6" NodeType="Command"><NodeId>WaitForClearanceLimit</NodeId><StartCondition LineNo="146" ColNo="6"><Lookup LineNo="146" ColNo="12"><Name><StringValue>AtClearanceLimit</StringValue></Name></Lookup></StartCondition><NodeBody><Command><Name><StringValue>handle_clearance_limit</StringValue></Name></Command></NodeBody></Node></Sequence></Concurrence></PlexilPlan>